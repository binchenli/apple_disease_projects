getwd()
setwd('../datas/sdm_project/')
getwd()
setwd('D:/OneDrive - 西北农林科技大学/programs/R/sdm_left_spot/')
diseases_pest <- read.csv("alternaria_leaf_spot_presence.csv",header = TRUE, check.names = F)
diseases_pest <- read.csv("alternaria_leaf_spot_presence.csv",header = TRUE, check.names = F)
View(diseases_pest)
diseases_pest <- read.csv("alternaria_leaf_spot_presence.csv",header = TRUE, check.names = F)
View(diseases_pest)
alternaria_leaf_spot<- read.csv("alternaria_leaf_spot_presence.csv",header = TRUE, check.names = F)
rm(diseases_pest)
coordinates(alternaria_leaf_spot) ~ lon + lat
load("D:/OneDrive - 西北农林科技大学/programs/R/sdm_project/.RData")
library(sdm)
library(dismo)
library(dplyr)
library(tidyr)
library(mapview)
library(raster)
library(parallel)
library(usdm)
# library(ggplot2)
library(maptools)
library(shiny)
library(kernlab)
library(sf)
library(rgdal)
library(rgeos)
library(sp)
library(corrplot)
library(ncdf4)
library(mapview)
library(lattice)
alternaria_leaf_spot<- read.csv("alternaria_leaf_spot_presence.csv",header = TRUE, check.names = F)
coordinates(alternaria_leaf_spot) ~ lon + lat
#env
bioc_hfp <-stack('D:/OneDrive - 西北农林科技大学/programs/R/datas/sdm_project/bioc_hfp.tif')
plot(bioc_hfp)
d <- sdmData(alternaria_leaf_spot
~pre + tmn + tmx + tmp + hfp, alternaria_leaf_spot,
predictors = bioc_hfp,bg = list(method='gRandom',n=1000))
library(sdm)
library(dismo)
library(dplyr)
library(tidyr)
library(mapview)
library(raster)
library(parallel)
library(usdm)
# library(ggplot2)
library(maptools)
library(shiny)
library(kernlab)
library(sf)
library(rgdal)
library(rgeos)
library(sp)
library(corrplot)
library(ncdf4)
library(mapview)
library(lattice)
d <- sdmData(alternaria_leaf_spot
~pre + tmn + tmx + tmp + hfp, alternaria_leaf_spot,
predictors = bioc_hfp,bg = list(method='gRandom',n=1000))
View(alternaria_leaf_spot)
sdmData
?bg = list(method='gRandom',n=1000)
?sdmData
library(sdm)
library(sdm)
library(dismo)
d <- sdmData(alternaria_leaf_spot
~pre + tmn + tmx + tmp + hfp, alternaria_leaf_spot,
predictors = bioc_hfp,bg = list(method='gRandom',n=1000))
library(sdm)
library(dismo)
library(dplyr)
library(tidyr)
library(mapview)
library(raster)
library(parallel)
library(usdm)
# library(ggplot2)
library(maptools)
library(shiny)
library(kernlab)
library(sf)
library(rgdal)
library(rgeos)
library(sp)
library(corrplot)
library(ncdf4)
library(mapview)
library(lattice)
alternaria_leaf_spot<- read.csv("alternaria_leaf_spot_presence.csv",header = TRUE, check.names = F)
coordinates(alternaria_leaf_spot) ~ lon + lat
#env
bioc_hfp <-stack('D:/OneDrive - 西北农林科技大学/programs/R/datas/sdm_project/bioc_hfp.tif')
plot(bioc_hfp)
d <- sdmData(alternaria_leaf_spot
~pre + tmn + tmx + tmp + hfp, alternaria_leaf_spot,
predictors = bioc_hfp,bg = list(method='gRandom',n=1000))
d <- sdmData(alternaria_leaf_spot
~pre + tmn + tmx + tmp + hfp, alternaria_leaf_spot,
predictors = bioc_hfp,bg = list(method='gRandom',n=1000))
library(sdm)
library(dismo)
library(dplyr)
library(tidyr)
library(mapview)
library(raster)
library(parallel)
library(usdm)
# library(ggplot2)
library(maptools)
library(shiny)
library(kernlab)
library(sf)
library(rgdal)
library(rgeos)
library(sp)
library(corrplot)
library(ncdf4)
library(mapview)
library(lattice)
library(sdm)
library(sdm)
library(dismo)
library(dplyr)
library(tidyr)
library(mapview)
library(raster)
library(parallel)
library(usdm)
# library(ggplot2)
library(maptools)
library(shiny)
library(kernlab)
library(sf)
library(rgdal)
library(rgeos)
library(sp)
library(corrplot)
library(ncdf4)
library(mapview)
library(lattice)
d <- sdmData(alternaria_leaf_spot
~pre + tmn + tmx + tmp + hfp, alternaria_leaf_spot,
predictors = bioc_hfp,bg = list(method='gRandom',n=1000))
View(bioc_hfp)
alternaria_leaf_spot
#env
bioc_hfp <-stack('D:/OneDrive - 西北农林科技大学/programs/R/datas/sdm_project/bioc_hfp.tif')
plot(bioc_hfp)
names(bioc_hfp) <- c('pre','tmn','tmp','tmx','hfp')
plot(bioc_hfp)
d <- sdmData(alternaria_leaf_spot
~pre + tmn + tmx + tmp + hfp, alternaria_leaf_spot,
predictors = bioc_hfp,bg = list(method='gRandom',n=1000))
plot(bioc_hfp)
d <- sdmData(alternaria_leaf_spot
~pre + tmn + tmx + tmp + hfp, alternaria_leaf_spot,
predictors = bioc_hfp,bg = list(method='gRandom',n=100))
d <- sdmData(alternaria_leaf_spot
~pre + tmn + tmx + tmp + hfp, alternaria_leaf_spot,
bioc_hfp,bg = list(method='gRandom',n=1000))
d <- sdmData(alternaria_leaf_spot
~pre + tmn + tmx + tmp + hfp, alternaria_leaf_spot,
bioc_hfp,bg = list(method='gRandom',n=1000))
d <- sdmData(alternaria_leaf_spot
~pre + tmn + tmx + tmp + hfp, alternaria_leaf_spot,
predictors = bioc_hfp,bg = list(method='gRandom',n=1000))
alternaria_leaf_spot
coordinates(alternaria_leaf_spot) ~ lon + lat
alternaria_leaf_spot
alternaria_leaf_spot <- coordinates(alternaria_leaf_spot) ~ lon + lat
alternaria_leaf_spot
coordinates(alternaria_leaf_spot)<- ~ lon + lat
alternaria_leaf_spot<- read.csv("alternaria_leaf_spot_presence.csv",header = TRUE, check.names = F)
alternaria_leaf_spot<- read.csv("alternaria_leaf_spot_presence.csv",header = TRUE, check.names = F)
coordinates(alternaria_leaf_spot) <- ~ lon + lat
alternaria_leaf_spot
d <- sdmData(alternaria_leaf_spot
~pre + tmn + tmx + tmp + hfp, alternaria_leaf_spot,
predictors = bioc_hfp,bg = list(method='gRandom',n=1000))
d
df <- as.data.frame(d) # train datas
df
m <- sdm(rot ~pre + tmn + tmx + tmp + hfp,
data=d, methods=c('glmnet','maxlike','mlp','rbf',
'gam','gbm','rpart','svm','rf')
,replications='boot',test.p=30,n=10,
parallelSetting=list(ncore=12,method='parallel')) #replications : sub , cv, boot
m <- sdm(alternaria_leaf_spot ~pre + tmn + tmx + tmp + hfp,
data=d, methods=c('glmnet','maxlike','mlp','rbf',
'gam','gbm','rpart','svm','rf')
,replications='boot',test.p=30,n=10,
parallelSetting=list(ncore=12,method='parallel')) #replications : sub , cv, boot
#m@models$species$rf$`13`@object
# roc(m)
gui(m)
#m@models$species$rf$`13`@object
# roc(m)
gui(m)
en1 <- ensemble(m,bioc_hfp,filename='en1.img',
setting=list(method='weighted',stat='tss',opt=2),overwrite = T)
cl <- colorRampPalette(c('red','orange','yellow','gray','green','blue'))
# mapview(en1)
plot(en1,col=cl(200))
# mapview(en1)
plot(en1)
# mapview(en1)
plot(en1,col=cl(200))
# mapview(en1)
plot(en1)
points(alternaria_leaf_spot,cex=1,pch='*',col='black')
m
#m@models$species$rf$`13`@object
# roc(m)
gui(m)
# mapview(en1)
plot(en1)
library(sdm)
library(dismo)
library(dplyr)
library(tidyr)
library(mapview)
library(raster)
library(parallel)
library(usdm)
library(maptools)
library(shiny)
library(kernlab)
library(sf)
library(rgdal)
library(rgeos)
library(sp)
library(corrplot)
library(ncdf4)
library(mapview)
library(lattice)
#env
bioc_hfp <-stack('../../../datas/environment/2020_2017_mean/bioc_hfp.tif')
names(bioc_hfp) <- c('pre','tmn','tmp','tmx','hfp')
